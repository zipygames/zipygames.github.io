<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chess</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="favicon.ico">
</head>
<body>
  <div class="card">
    <h2 class="retro">âš¡ Setup Chess Game</h2>
    <p class="muted" style="text-align:center;margin-bottom:16px">
      Enter player details and choose your game mode
    </p>

    <form id="setupForm">
      <label for="mode">Mode</label>
      <select id="mode" required>
        <option value="human">Player vs Player</option>
        <option value="ai">Player vs AI</option>
      </select>
      <label for="player1">Player 1 Name</label>
      <input type="text" id="player1" placeholder="Zipy Player 1" required>
      <label for="player1Color">Player 1 Color</label>
      <select id="player1Color" required>
        <option value="white" selected>White</option>
        <option value="black">Black</option>
      </select>

      <label for="player2">Player 2 Name</label>
      <input type="text" id="player2" placeholder="Zipy Player 2" required>

      <button type="submit" class="button" style="margin-top:18px;width:100%">
        Start Game ðŸš€
      </button>

      <!-- ðŸ”¥ Back Home button -->
      <button type="button" class="ghost small" style="margin-top:12px;width:100%" onclick="goHome()">
        â¬… Back Home
      </button>
    </form>
  </div>
<script>
  const form = document.getElementById("setupForm");
  const modeSel = document.getElementById("mode");
  const player2Input = document.getElementById("player2");
  const player1ColorSel = document.getElementById("player1Color");

  // Update Player 2 color automatically based on Player 1 selection
  function getPlayer2Color(player1Color) {
    return player1Color === "white" ? "black" : "white";
  }

  // Optional: show Player 2 color next to name input
  function updatePlayer2Placeholder() {
    const color = getPlayer2Color(player1ColorSel.value);
    if (modeSel.value !== "ai") {
      player2Input.placeholder = `Zipy Player 2 (${color})`;
    }
  }

  // Update placeholder when Player 1 changes color
  player1ColorSel.addEventListener("change", updatePlayer2Placeholder);

  // Update placeholder when mode changes
  modeSel.addEventListener("change", () => {
    if (modeSel.value === "ai") {
      player2Input.value = "Zipy AI";
      player2Input.disabled = true;
    } else {
      player2Input.value = "";
      player2Input.disabled = false;
      updatePlayer2Placeholder();
    }
  });

  // Initialize placeholder
  updatePlayer2Placeholder();

  form.addEventListener("submit", e => {
    e.preventDefault();

    const player1Color = player1ColorSel.value;
    const player2Color = getPlayer2Color(player1Color);

    const setup = {
      player1: document.getElementById("player1").value.trim() || "Zipy Player 1",
      player2: player2Input.value.trim() || (modeSel.value === "ai" ? "Zipy AI" : "Zipy Player 2"),
      mode: modeSel.value,
      colors: {
        player1: player1Color,
        player2: player2Color
      }
    };

    localStorage.setItem("chessSetup", JSON.stringify(setup));
    openWebOldLogic(() => {
        window.location.href = "chess.html"; // go to game
    });
  });

  // Back home button
  function goHome() {
    openWebOldLogic(() => {
        window.location.href = "../../index.html"; // adjust path if needed
    });
  }
</script>
<script src="../../adsopenhelper.js"></script>
</body>
</html>
